[gcode_macro M900]
description: Set Pressure Advance - Param K=K-Factor|float, other params are ignored
gcode:

	{% if printer["gcode_macro _printer_vars"].ptr_verb_codeflow %} _proc_start function=M900 func_params='"{rawparams|string}"'  {% endif %}

	{% if 'K' in params %}
		{% if printer["gcode_macro _linadv_vars"].linadv_verb_info %} 
			M118 M900 - {'PA:' + params.K|float|string + ' ST:' + printer.extruder.smooth_time|float|string}
		{% endif %}
		SET_PRESSURE_ADVANCE ADVANCE={params.K|float}	# SMOOTH_TIME=<pressure_advance_smooth_time>
	{% else %}
		{% if printer["gcode_macro _linadv_vars"].linadv_verb_error %} 
			M118 >>> M900: No PA K-factor passed... <<<
		{% endif %}
	{% endif %}

	{% if printer["gcode_macro _printer_vars"].ptr_verb_codeflow %} _proc_end function=M900 {% endif %}
