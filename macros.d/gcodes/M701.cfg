##    Load filament
[gcode_macro M701]
gcode:
   {% if printer.toolhead.status == "Ready" %}
      SAVE_GCODE_STATE NAME=loading_filament
      M117 Loading Filament
      M83
      G92 E0.0
      G1 E420 F6000  # length of bowden tube till cold-end (~420mm) 
      G1 E100 F200  # some extra to prime the nozzle --> slower 
      G92 E0.0
      RESTORE_GCODE_STATE name=loading_filament
   {% else %}
      { printer.gcode.action_respond_info("Filament loading disabled while printing!") }
   {% endif %}
